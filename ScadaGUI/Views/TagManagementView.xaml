<UserControl x:Class="ScadaGUI.Views.TagManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="550" d:DesignWidth="800">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <DataGrid Grid.Row="0" ItemsSource="{Binding Tags}" 
                  SelectedItem="{Binding SelectedTag}"
                  AutoGenerateColumns="False" CanUserAddRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*" IsReadOnly="True" />
                <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="Auto" IsReadOnly="True" />
                <DataGridTextColumn Header="IO Address" Binding="{Binding IOAddress}" Width="Auto" IsReadOnly="True"/>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="2*" IsReadOnly="True"/>
                <DataGridTextColumn Header="Units" Binding="{Binding Units}" Width="Auto" IsReadOnly="True"/>
                <DataGridTextColumn Header="ScanTime" Binding="{Binding ScanTime}" Width="Auto" IsReadOnly="True"/>
                <DataGridCheckBoxColumn Header="Scanning On" Binding="{Binding IsScanning}" Width="Auto" IsReadOnly="True"/>
                <DataGridTextColumn Header="Low Limit" Binding="{Binding LowLimit}" Width="Auto" IsReadOnly="True"/>
                <DataGridTextColumn Header="High Limit" Binding="{Binding HighLimit}" Width="Auto" IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <GroupBox Grid.Row="1" Header="Add New Tag" Margin="0,10,0,0" Padding="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Label Grid.Row="0" Grid.Column="0" Content="Name:" VerticalAlignment="Center" Margin="5"/>
                    <TextBox Grid.Row="0" Grid.Column="1" Margin="5" Text="{Binding NewTagName, UpdateSourceTrigger=PropertyChanged}" />
                    <Label Grid.Row="0" Grid.Column="2" Content="Type:" VerticalAlignment="Center" Margin="15,5,5,5"/>
                    <ComboBox Grid.Row="0" Grid.Column="3" Margin="5" 
                              ItemsSource="{Binding TagTypes}" 
                              SelectedItem="{Binding SelectedTagTypeForComboBox, Mode=TwoWay}" />
                    <Label Grid.Row="1" Grid.Column="0" Content="IO Address:" VerticalAlignment="Center" Margin="5"/>
                    <TextBox Grid.Row="1" Grid.Column="1" Margin="5" Text="{Binding NewTagIoAddress, UpdateSourceTrigger=PropertyChanged}" />
                    <Label Grid.Row="1" Grid.Column="2" Content="Description:" VerticalAlignment="Center" Margin="15,5,5,5"/>
                    <TextBox Grid.Row="1" Grid.Column="3" Margin="5" Text="{Binding NewTagDescription, UpdateSourceTrigger=PropertyChanged}" />
                </Grid>
                <Separator Grid.Row="1" Margin="5,10,5,5"/>
                <StackPanel Grid.Row="2" Margin="0,5,0,10">
                    <StackPanel Orientation="Horizontal" Visibility="{Binding AnalogFieldsVisibility}">
                        <Label Content="Low Limit:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Width="80" Margin="0,5,5,5" Text="{Binding NewTagLowLimit, UpdateSourceTrigger=PropertyChanged}" PreviewTextInput="TextBox_PreviewTextInput" />
                        <Label Content="High Limit:" VerticalAlignment="Center" Margin="15,5,5,5"/>
                        <TextBox Width="80" Margin="0,5,5,5" Text="{Binding NewTagHighLimit, UpdateSourceTrigger=PropertyChanged}" PreviewTextInput="TextBox_PreviewTextInput" />
                        <Label Content="Units:" VerticalAlignment="Center" Margin="15,5,5,5"/>
                        <TextBox Width="80" Margin="0,5,5,5" Text="{Binding NewTagUnits, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Visibility="{Binding InputFieldsVisibility}">
                        <Label Content="Scan Time (ms):" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Width="80" Margin="0,5,5,5" Text="{Binding NewTagScanTime, UpdateSourceTrigger=PropertyChanged}" PreviewTextInput="TextBox_PreviewTextInput" />
                        <CheckBox Content="Scanning On" VerticalAlignment="Center" Margin="15,5,5,5" IsChecked="{Binding NewTagIsScanning}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Visibility="{Binding OutputFieldsVisibility}">
                        <Label Content="Initial Value:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Width="80" Margin="0,5,5,5" Text="{Binding NewTagInitialValue, UpdateSourceTrigger=PropertyChanged}" PreviewTextInput="TextBox_PreviewTextInput" />
                    </StackPanel>
                </StackPanel>
                <StackPanel Grid.Row="4" Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <Button Content="Add New Tag" Command="{Binding AddTagCommand}" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Delete Selected" Command="{Binding DeleteTagCommand}" Padding="10,5"/>
                    </StackPanel>
                    <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" FontWeight="Bold" Margin="5" />
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</UserControl>